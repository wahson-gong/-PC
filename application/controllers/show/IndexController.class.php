<?php// 文章模型控制器class IndexController extends BaseController{          public function  indexAction()          {              $code=empty($_GET['code'])?'':$_GET['code'];              $state=empty($_GET['state'])?'':$_GET['state'];              if ($code!='' && $state==1){                  $client_id="30f1b6b58809e6b0426163c7bce64402";                  $client_secret="5a758e2527cf3812ee938daef43c3869e1cf8c14";                  $url="https://auth.om.qq.com/omoauth2/accesstoken?grant_type=authorization_code&client_id=$client_id&client_secret=$client_secret&code=$code";                  $ch=curl_init();                  curl_setopt($ch,CURLOPT_URL,$url);                  curl_setopt($ch,CURLOPT_RETURNTRANSFER,1 );                  curl_setopt($ch,CURLOPT_POST,1 );                  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); //不验证证书下同                  curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);                  $return=curl_exec($ch);                  curl_close($ch );                  $name=json_decode($return,true);                  $model=new ModelNew('user');                  $data['qq_access_token']=$name['data']['access_token'];                  $data['qq_refresh_token']=$name['data']['refresh_token'];                  $data['qqOpenid']=$name['data']['openid'];                  $msg=$model->where(['yonghuming'=>18582479523])->update($data);                  if ($msg){                      $this->jump('index.php?p=show&c=admin&a=index','',0);                  }              }else{                  include CUR_VIEW_PATH . "Sindex" . DS . "index_index.html";              }          }          //下载的页面           public function xiazaiAction(){               include CUR_VIEW_PATH . "Sindex" . DS . "index_xiazai.html";           }           //关于我们           public function aboutAction(){               include CUR_VIEW_PATH . "Sindex" . DS . "index_about.html";           }           //联系我们           public function contactAction(){               include CUR_VIEW_PATH . "Sindex" . DS . "index_contact.html";           }           //协议           public function xieyiAction(){               include CUR_VIEW_PATH . "Sindex" . DS . "index_xieyi.html";           }           public function jianyiAction(){               $data=$_POST;               $model=new ModelNew('jianyi');               $msg=$model->insert($data);               if ($msg){                   $this->jump('index.php?p=show&c=index&a=contact','提交成功',1);               }           }}